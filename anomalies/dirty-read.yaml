name: "Dirty Read"
cases:
  - setup:
      - CREATE TABLE table_foo (id INT PRIMARY KEY)
    events:
      - timestamp: "timestamp-1"
        session: "session-1"
        statements:
          - sql: "BEGIN TRANSACTION"
          - sql: "INSERT INTO table_foo (id) VALUES (123)"
      - timestamp: "timestamp-2"
        session: "session-2"
        statements:
          - sql: "SELECT COUNT(*) FROM table_foo WHERE id = 123"
          - expected:
              - "1"
    teardown:
      - DROP TABLE IF EXISTS table_foo
